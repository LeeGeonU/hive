{% extends "base.html" %}

{% block title %} timeline {% endblock %}

{% block menu %}
Hive Hive
<div class="well sidebar-nav">
 <ul class="nav nav-list"> 
  <li>
		<img src="{{ user.get_profile.get_image }}" alt="{{ user.username }}" width="60" height="60">
		<a href="/timelines/my_timeline/">{{ user.username }}</a>
  </li>
  <li class="nav-header">Timeline</li>
  <li class="active"><a href="/">Main Timeline</a></li>
  <li><a href="#">Humor Timeline</a></li>
  <li><a href="#">Notice Timeline</a></li>
  <li><a href="#">Custom Timeline</a></li>
  <li class="nav-header">People</li>
  <li><a href="/accounts/people_list/">People List</a></li>
  <li><a href="#">Who I Followed</a></li>
  <li><a href="#">Who Followed me</a></li>
  <li class="nav-header">Mention</li>
  <li><a href="#">Link</a></li>
  <li><a href="#">Link</a></li>
  <li><a href="#">Link</a></li>
 </ul>
</div><!--/.well -->
{% endblock %} <!-- /.menu -->

{% block content %}
	<link rel="stylesheet" href="{{ STATIC_URL }}css/redactor.css" />
	<!-- logout -->
	<p>
		<a href='/accounts/logout/'> log out </a>
	</p>
	<!-- Post Form -->
	<p>
		<form action="/posts/create_from_timeline/" method="post">{% csrf_token %}
			say something! : </br> 
    		<textarea id="redactor_content" name="post_contents"></textarea>
    		<input type="submit" value="POST">
    	</form>
    </p>
    
    <!-- timeline -->				
    <div id="timeline_container">
	{% include "timelines/timeline_timeline.html" %}
    </div>
	<button id="loadmore" class="btn-large btn-block btn"> LoadMore </button>
	
	<script type="text/javascript" src="{{ STATIC_URL }}js/jquery-1.8.0.min.js"></script>
	<script src="{{ STATIC_URL }}js/redactor.js"></script>
	<script> 
		var last_timeline_id = {{ last_timeline_id }} ;
		$(document).ready(
			function()
			{

				$("form textarea").redactor({
				    imageUpload: '{% url posts.views.upload_photos %}',
				    imageGetJson: '{% url posts.views.recent_photos %}'
				});
				$("#loadmore").click(function(){
					// http://127.0.0.1:8000/timelines/get_more_timeline/100/
					// timeline_container
				var req_url='/timelines/get_more_timeline/'+last_timeline_id + '/'
				$.get(req_url,function(data){
					$("#timeline_container").append(data)
				})
				})

				// anchor detect and scroll to
				var hash = window.location.hash;
				if( hash != ""){
				var new_position = $(hash).offset()
				window.scrollTo(new_position.left, new_position.top);
				}
			}
		);
	</script>
{% endblock %}
